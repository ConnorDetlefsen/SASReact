{"ast":null,"code":"var _jsxFileName = \"/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyRides2.jsx\";\nimport React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport UserContext from \"../Context/UserContext\";\nimport Ride from \"../Components/RideSelection\";\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { FastfoodOutlined } from \"@material-ui/icons\";\n\nclass BuyRides2 extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ride9Purchased: false,\n      ride10Purchased: false,\n      ride11Purchased: false,\n      ride12Purchased: false,\n      ride13Purchased: false,\n      ride14Purchased: false,\n      ride15Purchased: false,\n      ride16Purchased: false,\n      rideOptions: [],\n      ride9: [],\n      ride10: [],\n      ride11: [],\n      ride12: [],\n      ride13: [],\n      ride14: [],\n      ride15: [],\n      ride16: [],\n      ridePost: {\n        row_id: 1,\n        team_id: null,\n        ride_id: null,\n        round_num: 1,\n        period_num: 1,\n        ride_length: null,\n        seats: null\n      },\n      ridesPurchased: []\n    };\n\n    this.onNextClick = e => {\n      const {\n        history\n      } = this.props;\n      history.push(\"/buyride3\");\n    };\n\n    this.onBackClick = e => {\n      const {\n        history\n      } = this.props;\n      history.push(\"/buyride\");\n    };\n\n    this.handleCheckBoxChange = e => {\n      let state = e.currentTarget.attributes.stateVar.value; //this is the state var being changed by checking box\n\n      this.setState(initialState => ({\n        [state]: !initialState[state]\n      }));\n    };\n\n    this.handleClick = e => {\n      const {\n        team,\n        ridePost\n      } = this.state;\n      const amount = e.currentTarget.value;\n      const budget = team.budget; // used to set api team.budget\n\n      const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n\n      if (isBudgetNotNegative < 0) {\n        toast.error(\"You don't have enough money!\");\n        return;\n      }\n\n      team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n      this.context.currentUser.budget = team.budget; //updates the context\n\n      this.setState({\n        test: true\n      });\n      http.put(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID, team); //end budget check\n\n      let RideLengthTest = parseInt(e.currentTarget.attributes.time.value, 10);\n      let rideID = parseInt(e.currentTarget.id, 10);\n      http.post(config.apiEndpoint + \"/rides/\", {\n        team_id: this.context.currentUser.teamID,\n        ride_id: rideID,\n        ride_length: RideLengthTest,\n        seats: 4,\n        description: e.currentTarget.name,\n        status: 1.0\n      }).then(res => {\n        console.log(res);\n        toast.success(`Ride Bought Sent`);\n      });\n      let rideVar = \"ride\" + rideID;\n      this.state.ridesPurchased[rideVar] = true;\n      http.put(config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID, this.state.ridesPurchased);\n    };\n\n    this.onFinishPeriod = e => {\n      console.log(\"submit\");\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      history\n    } = this.props;\n\n    if (this.context.currentUser.name === null) {\n      history.push(\"/\");\n    }\n\n    http.get(config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        ridesPurchased: res.data\n      });\n    });\n    http.get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        team: res.data\n      });\n      this.context.currentUser.budget = res.data.budget; //updates the context\n    });\n    http.get(config.apiEndpoint + \"/rideoptions/\").then(res => {\n      this.setState({\n        rideOptions: res.data,\n        ride9: res.data[8],\n        ride10: res.data[9],\n        ride11: res.data[10],\n        ride12: res.data[11],\n        ride13: res.data[12],\n        ride14: res.data[13],\n        ride15: res.data[14],\n        ride16: res.data[15] // test: res.data.slice(0, 8),\n\n      });\n    });\n  }\n  /*\n   {this.state.test.map((test) => (\n                <tr key={test.id}>\n                  <Ride\n                    value={test.price}\n                    description={test.description}\n                    onClick={(e) => {\n                      this.handleClick(e);\n                    }}\n                    id={test.ride_id}\n                    time={test.ride_length}\n                  ></Ride>\n                  <br></br>\n                </tr>\n              ))}\n              */\n\n\n  render() {\n    const {\n      ride9,\n      ride10,\n      ride11,\n      ride12,\n      ride13,\n      ride14,\n      ride15,\n      ride16\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      id: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      activePage: \"rides\",\n      onFinishPeriod: this.onFinishPeriod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      id: \"page-content-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      pagename: \"map\",\n      budget: this.context.currentUser.budget,\n      period: this.context.currentUser.round,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      px: 5,\n      py: 4,\n      className: \"bg-white box-shadow rounded\",\n      minHeight: \"calc(100vh - 140px)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      p: 1,\n      textAlign: \"center\",\n      fontWeight: \"fontWeightBold\",\n      className: \"bg-blue box-shadow rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, \"Buy Rides\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"columns4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Ride, {\n      name: ride9.description,\n      value: ride9.price,\n      time: ride9.ride_length,\n      purchased: this.state.ridesPurchased.ride9,\n      onClick: this.handleClick,\n      id: ride9.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride10.description,\n      value: ride10.price,\n      time: ride10.ride_length,\n      purchased: this.state.ridesPurchased.ride10,\n      onClick: this.handleClick,\n      id: ride10.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride11.description,\n      value: ride11.price,\n      time: ride11.ride_length,\n      purchased: this.state.ridesPurchased.ride11,\n      onClick: this.handleClick,\n      id: ride11.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride12.description,\n      value: ride12.price,\n      time: ride12.ride_length,\n      purchased: this.state.ridesPurchased.ride12,\n      onClick: this.handleClick,\n      id: ride12.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride13.description,\n      value: ride13.price,\n      time: ride13.ride_length,\n      purchased: this.state.ridesPurchased.ride13,\n      onClick: this.handleClick,\n      id: ride13.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride14.description,\n      value: ride14.price,\n      time: ride14.ride_length,\n      purchased: this.state.ridesPurchased.ride14,\n      onClick: this.handleClick,\n      id: ride14.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride15.description,\n      value: ride15.price,\n      time: ride15.ride_length,\n      purchased: this.state.ridesPurchased.ride15,\n      onClick: this.handleClick,\n      id: ride15.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride16.description,\n      value: ride16.price,\n      time: ride16.ride_length,\n      purchased: this.state.ridesPurchased.ride16,\n      onClick: this.handleClick,\n      id: ride16.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onBackClick,\n      class: \"btn btn-primary leftButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }\n    }, \"Back Page\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onNextClick,\n      class: \"btn btn-primary rightButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 15\n      }\n    }, \"Next Page\")))));\n  }\n\n}\n\nBuyRides2.contextType = UserContext;\nexport default BuyRides2;","map":{"version":3,"sources":["/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyRides2.jsx"],"names":["React","Component","Sidebar","NavBar","UserContext","Ride","http","config","toast","ToastContainer","Box","Container","Grid","FastfoodOutlined","BuyRides2","state","ride9Purchased","ride10Purchased","ride11Purchased","ride12Purchased","ride13Purchased","ride14Purchased","ride15Purchased","ride16Purchased","rideOptions","ride9","ride10","ride11","ride12","ride13","ride14","ride15","ride16","ridePost","row_id","team_id","ride_id","round_num","period_num","ride_length","seats","ridesPurchased","onNextClick","e","history","props","push","onBackClick","handleCheckBoxChange","currentTarget","attributes","stateVar","value","setState","initialState","handleClick","team","amount","budget","isBudgetNotNegative","parseInt","error","context","currentUser","test","put","apiEndpoint","teamID","RideLengthTest","time","rideID","id","post","description","name","status","then","res","console","log","success","rideVar","onFinishPeriod","componentDidMount","get","data","render","round","price","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport UserContext from \"../Context/UserContext\";\n\nimport Ride from \"../Components/RideSelection\";\n\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { FastfoodOutlined } from \"@material-ui/icons\";\n\nclass BuyRides2 extends Component {\n  static contextType = UserContext;\n\n  state = {\n    ride9Purchased: false,\n    ride10Purchased: false,\n    ride11Purchased: false,\n    ride12Purchased: false,\n    ride13Purchased: false,\n    ride14Purchased: false,\n    ride15Purchased: false,\n    ride16Purchased: false,\n\n    rideOptions: [],\n\n    ride9: [],\n    ride10: [],\n    ride11: [],\n    ride12: [],\n    ride13: [],\n    ride14: [],\n    ride15: [],\n    ride16: [],\n\n    ridePost: {\n      row_id: 1,\n      team_id: null,\n      ride_id: null,\n      round_num: 1,\n      period_num: 1,\n      ride_length: null,\n      seats: null,\n    },\n    ridesPurchased: [],\n  };\n\n  onNextClick = (e) => {\n    const { history } = this.props;\n    history.push(\"/buyride3\");\n  };\n  onBackClick = (e) => {\n    const { history } = this.props;\n    history.push(\"/buyride\");\n  };\n\n  async componentDidMount() {\n    const { history } = this.props;\n\n    if (this.context.currentUser.name === null) {\n      history.push(\"/\");\n    }\n    http\n      .get(\n        config.apiEndpoint +\n          \"/ridespurchased/\" +\n          this.context.currentUser.teamID\n      )\n      .then((res) => {\n        this.setState({ ridesPurchased: res.data });\n      });\n\n    http\n      .get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID)\n      .then((res) => {\n        this.setState({ team: res.data });\n        this.context.currentUser.budget = res.data.budget; //updates the context\n      });\n    http.get(config.apiEndpoint + \"/rideoptions/\").then((res) => {\n      this.setState({\n        rideOptions: res.data,\n        ride9: res.data[8],\n        ride10: res.data[9],\n        ride11: res.data[10],\n        ride12: res.data[11],\n        ride13: res.data[12],\n        ride14: res.data[13],\n        ride15: res.data[14],\n        ride16: res.data[15],\n\n        // test: res.data.slice(0, 8),\n      });\n    });\n  }\n\n  /*\n   {this.state.test.map((test) => (\n                <tr key={test.id}>\n                  <Ride\n                    value={test.price}\n                    description={test.description}\n                    onClick={(e) => {\n                      this.handleClick(e);\n                    }}\n                    id={test.ride_id}\n                    time={test.ride_length}\n                  ></Ride>\n                  <br></br>\n                </tr>\n              ))}\n              */\n\n  handleCheckBoxChange = (e) => {\n    let state = e.currentTarget.attributes.stateVar.value; //this is the state var being changed by checking box\n    this.setState((initialState) => ({\n      [state]: !initialState[state],\n    }));\n  };\n  handleClick = (e) => {\n    const { team, ridePost } = this.state;\n\n    const amount = e.currentTarget.value;\n    const budget = team.budget; // used to set api team.budget\n\n    const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n    if (isBudgetNotNegative < 0) {\n      toast.error(\"You don't have enough money!\");\n      return;\n    }\n    team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n    this.context.currentUser.budget = team.budget; //updates the context\n    this.setState({ test: true });\n    http.put(\n      config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID,\n      team\n    );\n    //end budget check\n\n    let RideLengthTest = parseInt(e.currentTarget.attributes.time.value, 10);\n    let rideID = parseInt(e.currentTarget.id, 10);\n    http\n      .post(config.apiEndpoint + \"/rides/\", {\n        team_id: this.context.currentUser.teamID,\n        ride_id: rideID,\n        ride_length: RideLengthTest,\n        seats: 4,\n        description: e.currentTarget.name,\n\n        status: 1.0,\n      })\n      .then((res) => {\n        console.log(res);\n        toast.success(`Ride Bought Sent`);\n      });\n\n    let rideVar = \"ride\" + rideID;\n    this.state.ridesPurchased[rideVar] = true;\n\n    http.put(\n      config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID,\n      this.state.ridesPurchased\n    );\n  };\n\n  onFinishPeriod = (e) => {\n    console.log(\"submit\");\n  };\n\n  render() {\n    const {\n      ride9,\n      ride10,\n      ride11,\n      ride12,\n      ride13,\n      ride14,\n      ride15,\n\n      ride16,\n    } = this.state;\n    return (\n      <React.Fragment>\n        <ToastContainer />\n        <Box display=\"flex\" id=\"wrapper\">\n          <Sidebar activePage=\"rides\" onFinishPeriod={this.onFinishPeriod} />\n          <Container id=\"page-content-wrapper\">\n            <NavBar\n              pagename=\"map\"\n              budget={this.context.currentUser.budget}\n              period={this.context.currentUser.round}\n            />\n            <Box\n              px={5}\n              py={4}\n              className=\"bg-white box-shadow rounded\"\n              minHeight={\"calc(100vh - 140px)\"}\n            >\n              <Grid container>\n                <Grid item xs={12}>\n                  <Box\n                    p={1}\n                    textAlign=\"center\"\n                    fontWeight=\"fontWeightBold\"\n                    className=\"bg-blue box-shadow rounded\"\n                  >\n                    Buy Rides\n                  </Box>\n                </Grid>\n              </Grid>\n              <br />\n\n              <div class=\"columns4\">\n                <Ride\n                  name={ride9.description}\n                  value={ride9.price}\n                  time={ride9.ride_length}\n                  purchased={this.state.ridesPurchased.ride9}\n                  onClick={this.handleClick}\n                  id={ride9.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride10.description}\n                  value={ride10.price}\n                  time={ride10.ride_length}\n                  purchased={this.state.ridesPurchased.ride10}\n                  onClick={this.handleClick}\n                  id={ride10.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride11.description}\n                  value={ride11.price}\n                  time={ride11.ride_length}\n                  purchased={this.state.ridesPurchased.ride11}\n                  onClick={this.handleClick}\n                  id={ride11.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride12.description}\n                  value={ride12.price}\n                  time={ride12.ride_length}\n                  purchased={this.state.ridesPurchased.ride12}\n                  onClick={this.handleClick}\n                  id={ride12.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride13.description}\n                  value={ride13.price}\n                  time={ride13.ride_length}\n                  purchased={this.state.ridesPurchased.ride13}\n                  onClick={this.handleClick}\n                  id={ride13.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride14.description}\n                  value={ride14.price}\n                  time={ride14.ride_length}\n                  purchased={this.state.ridesPurchased.ride14}\n                  onClick={this.handleClick}\n                  id={ride14.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride15.description}\n                  value={ride15.price}\n                  time={ride15.ride_length}\n                  purchased={this.state.ridesPurchased.ride15}\n                  onClick={this.handleClick}\n                  id={ride15.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride16.description}\n                  value={ride16.price}\n                  time={ride16.ride_length}\n                  purchased={this.state.ridesPurchased.ride16}\n                  onClick={this.handleClick}\n                  id={ride16.ride_id}\n                ></Ride>\n              </div>\n              <br></br>\n              <button\n                onClick={this.onBackClick}\n                class=\"btn btn-primary leftButton\"\n              >\n                Back Page\n              </button>\n              <button\n                onClick={this.onNextClick}\n                class=\"btn btn-primary rightButton\"\n              >\n                Next Page\n              </button>\n            </Box>\n          </Container>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default BuyRides2;\n"]},"metadata":{},"sourceType":"module"}