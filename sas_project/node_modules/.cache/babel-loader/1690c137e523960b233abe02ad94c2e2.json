{"ast":null,"code":"var _jsxFileName = \"/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyData.jsx\";\nimport React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport DataPack from \"../Components/DataPack\";\nimport DataPackDownload from \"../Components/DataPackDownload\";\nimport UserContext from \"../Context/UserContext\";\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { toast, ToastContainer } from \"react-toastify\";\n\nclass BuyData extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      cost: 0,\n      data: [],\n      purchasedData: [],\n      data1: false,\n      data2: false,\n      data3: false,\n      data4: false,\n      data5: false,\n      data6: false,\n      team: [],\n      test: false,\n      dataLinks: []\n    };\n\n    this.budgetUpdate = async team => {\n      const amount = this.state.amount;\n      const budget = team.budget; // used to set api team.budget\n\n      const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n      console.log(isBudgetNotNegative);\n\n      if (isBudgetNotNegative < 0) {\n        toast.error(\"You don't have enough money!\");\n        return;\n      }\n\n      team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n      this.context.currentUser.budget = team.budget; //updates the context\n\n      const {\n        data\n      } = await http.put(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID, team);\n      console.log(data);\n    };\n\n    this.handleClick = e => {\n      const {\n        team\n      } = this.state;\n      const amount = e.currentTarget.value;\n      const budget = team.budget; // used to set api team.budget\n\n      const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n      console.log(isBudgetNotNegative);\n\n      if (isBudgetNotNegative < 0) {\n        toast.error(\"You don't have enough money!\");\n        return;\n      }\n\n      team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n      this.context.currentUser.budget = team.budget; //updates the context\n\n      this.setState({\n        test: true\n      });\n      http.put(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID, team);\n      let id = \"data\" + e.currentTarget.id;\n      this.state.purchasedData[id] = true;\n      toast.success(\"Data Pack Purchased\");\n      http.put(config.apiEndpoint + \"/buydata/\" + this.context.currentUser.teamID + \"/\" + this.context.currentUser.round + \"/\" + this.context.currentUser.period, this.state.purchasedData);\n    };\n\n    this.onFinishPeriod = e => {\n      console.log(\"submit\");\n    };\n  }\n\n  /*\n  {this.state.data.map((data) => (\n                  <tr key={data.id}>\n                    <DataPack\n                      value={data.price}\n                      description={data.description}\n                      onClick={(e) => {\n                        this.handleClick(e);\n                      }}\n                      id={data.data_id}\n                    ></DataPack>\n                    <br></br>\n                  </tr>\n                ))}\n  */\n  async componentDidMount() {\n    console.log(\"page started\");\n    http.get(config.apiEndpoint + \"/dataoptions/\").then(res => {\n      console.log(res.data);\n      this.setState({\n        data: res.data\n      });\n    });\n    http.get(config.apiEndpoint + \"/filename/\" + this.context.currentUser.round + \"/\" + this.context.currentUser.period + \"/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        datalinks: res.data\n      });\n    });\n    http.get(config.apiEndpoint + \"/buydata/\" + this.context.currentUser.teamID + \"/\" + this.context.currentUser.round + \"/\" + this.context.currentUser.period).then(res => {\n      console.log(res.data);\n      this.setState({\n        purchasedData: res.data\n      });\n    });\n    http.get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID).then(res => {\n      console.log(res.data);\n      this.setState({\n        team: res.data\n      });\n    });\n  }\n\n  render() {\n    const {\n      data,\n      dataLinks\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      id: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      activePage: \"buydata\",\n      onFinishPeriod: this.onFinishPeriod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      id: \"page-content-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      pagename: \"Buy Data\",\n      budget: this.context.currentUser.budget,\n      period: this.context.currentUser.round,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      px: 5,\n      py: 4,\n      className: \"bg-white box-shadow rounded\",\n      minHeight: \"calc(100vh - 140px)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      p: 1,\n      textAlign: \"center\",\n      fontWeight: \"fontWeightBold\",\n      className: \"bg-blue box-shadow rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, \"Buy Data\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      class: \"columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(DataPack, {\n      value: 5000,\n      description: \"Weather DataPack\",\n      onClick: e => {\n        this.handleClick(e);\n      },\n      id: \"1\",\n      disabled: this.state.purchasedData.data1,\n      isPurchased: this.state.purchasedData.data1,\n      dataLink: dataLinks.filename1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(DataPack, {\n      value: 5000,\n      description: \"Basic Engineering Report\",\n      onClick: e => {\n        this.handleClick(e);\n      },\n      id: \"2\",\n      disabled: this.state.purchasedData.data2,\n      isPurchased: this.state.purchasedData.data2,\n      dataLink: dataLinks.filename2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(DataPack, {\n      value: 5000,\n      description: \"Advanced Engineering Report\",\n      onClick: e => {\n        this.handleClick(e);\n      },\n      id: \"3\",\n      disabled: this.state.purchasedData.data3,\n      isPurchased: this.state.purchasedData.data3,\n      dataLink: dataLinks.filename3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(DataPack, {\n      value: 5000,\n      description: \"Visitor DataPack\",\n      onClick: e => {\n        this.handleClick(e);\n      },\n      id: \"4\",\n      disabled: this.state.purchasedData.data4,\n      isPurchased: this.state.purchasedData.data4,\n      dataLink: dataLinks.filename4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(DataPack, {\n      value: 5000,\n      description: \"Ticket Sales DataPack\",\n      onClick: e => {\n        this.handleClick(e);\n      },\n      id: \"5\",\n      disabled: this.state.purchasedData.data5,\n      isPurchased: this.state.purchasedData.data5,\n      dataLink: dataLinks.filename5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(DataPack, {\n      value: 5000,\n      description: \"Competitor DataPack\",\n      onClick: e => {\n        this.handleClick(e);\n      },\n      id: \"6\",\n      disabled: this.state.purchasedData.data6,\n      isPurchased: this.state.purchasedData.data6,\n      dataLink: dataLinks.filename6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nBuyData.contextType = UserContext;\nexport default BuyData;","map":{"version":3,"sources":["/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyData.jsx"],"names":["React","Component","Sidebar","NavBar","DataPack","DataPackDownload","UserContext","http","config","Box","Container","Grid","toast","ToastContainer","BuyData","state","cost","data","purchasedData","data1","data2","data3","data4","data5","data6","team","test","dataLinks","budgetUpdate","amount","budget","isBudgetNotNegative","parseInt","console","log","error","context","currentUser","put","apiEndpoint","teamID","handleClick","e","currentTarget","value","setState","id","success","round","period","onFinishPeriod","componentDidMount","get","then","res","datalinks","render","filename1","filename2","filename3","filename4","filename5","filename6","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport DataPack from \"../Components/DataPack\";\nimport DataPackDownload from \"../Components/DataPackDownload\";\nimport UserContext from \"../Context/UserContext\";\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { toast, ToastContainer } from \"react-toastify\";\n\nclass BuyData extends Component {\n  static contextType = UserContext;\n\n  state = {\n    cost: 0,\n    data: [],\n    purchasedData: [],\n\n    data1: false,\n    data2: false,\n    data3: false,\n    data4: false,\n    data5: false,\n    data6: false,\n\n    team: [],\n\n    test: false,\n\n    dataLinks: [],\n  };\n\n  /*\n{this.state.data.map((data) => (\n                  <tr key={data.id}>\n                    <DataPack\n                      value={data.price}\n                      description={data.description}\n                      onClick={(e) => {\n                        this.handleClick(e);\n                      }}\n                      id={data.data_id}\n                    ></DataPack>\n                    <br></br>\n                  </tr>\n                ))}\n  */\n\n  async componentDidMount() {\n    console.log(\"page started\");\n    http.get(config.apiEndpoint + \"/dataoptions/\").then((res) => {\n      console.log(res.data);\n      this.setState({ data: res.data });\n    });\n\n    http\n      .get(\n        config.apiEndpoint +\n          \"/filename/\" +\n          this.context.currentUser.round +\n          \"/\" +\n          this.context.currentUser.period +\n          \"/\" +\n          this.context.currentUser.teamID\n      )\n      .then((res) => {\n        this.setState({ datalinks: res.data });\n      });\n\n    http\n      .get(\n        config.apiEndpoint +\n          \"/buydata/\" +\n          this.context.currentUser.teamID +\n          \"/\" +\n          this.context.currentUser.round +\n          \"/\" +\n          this.context.currentUser.period\n      )\n      .then((res) => {\n        console.log(res.data);\n        this.setState({ purchasedData: res.data });\n      });\n    http\n      .get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID)\n      .then((res) => {\n        console.log(res.data);\n        this.setState({ team: res.data });\n      });\n  }\n\n  budgetUpdate = async (team) => {\n    const amount = this.state.amount;\n    const budget = team.budget; // used to set api team.budget\n\n    const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n    console.log(isBudgetNotNegative);\n    if (isBudgetNotNegative < 0) {\n      toast.error(\"You don't have enough money!\");\n      return;\n    }\n    team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n\n    this.context.currentUser.budget = team.budget; //updates the context\n\n    const { data } = await http.put(\n      config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID,\n      team\n    );\n    console.log(data);\n  };\n\n  handleClick = (e) => {\n    const { team } = this.state;\n\n    const amount = e.currentTarget.value;\n    const budget = team.budget; // used to set api team.budget\n\n    const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n    console.log(isBudgetNotNegative);\n    if (isBudgetNotNegative < 0) {\n      toast.error(\"You don't have enough money!\");\n      return;\n    }\n    team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n\n    this.context.currentUser.budget = team.budget; //updates the context\n\n    this.setState({ test: true });\n    http.put(\n      config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID,\n      team\n    );\n\n    let id = \"data\" + e.currentTarget.id;\n    this.state.purchasedData[id] = true;\n    toast.success(\"Data Pack Purchased\");\n    http.put(\n      config.apiEndpoint +\n        \"/buydata/\" +\n        this.context.currentUser.teamID +\n        \"/\" +\n        this.context.currentUser.round +\n        \"/\" +\n        this.context.currentUser.period,\n      this.state.purchasedData\n    );\n  };\n\n  onFinishPeriod = (e) => {\n    console.log(\"submit\");\n  };\n\n  render() {\n    const { data, dataLinks } = this.state;\n    return (\n      <React.Fragment>\n        <ToastContainer />\n        <Box display=\"flex\" id=\"wrapper\">\n          <Sidebar activePage=\"buydata\" onFinishPeriod={this.onFinishPeriod} />\n          <Container id=\"page-content-wrapper\">\n            <NavBar\n              pagename=\"Buy Data\"\n              budget={this.context.currentUser.budget}\n              period={this.context.currentUser.round}\n            />\n            <Box\n              px={5}\n              py={4}\n              className=\"bg-white box-shadow rounded\"\n              minHeight={\"calc(100vh - 140px)\"}\n            >\n              <Grid container spacing={3}>\n                <Grid item xs={12}>\n                  <Box\n                    p={1}\n                    textAlign=\"center\"\n                    fontWeight=\"fontWeightBold\"\n                    className=\"bg-blue box-shadow rounded\"\n                  >\n                    Buy Data\n                  </Box>\n                </Grid>\n              </Grid>\n              <br />\n              <Box class=\"columns\">\n                <DataPack\n                  value={5000}\n                  description=\"Weather DataPack\"\n                  onClick={(e) => {\n                    this.handleClick(e);\n                  }}\n                  id=\"1\"\n                  disabled={this.state.purchasedData.data1}\n                  isPurchased={this.state.purchasedData.data1}\n                  dataLink={dataLinks.filename1}\n                ></DataPack>\n                <DataPack\n                  value={5000}\n                  description=\"Basic Engineering Report\"\n                  onClick={(e) => {\n                    this.handleClick(e);\n                  }}\n                  id=\"2\"\n                  disabled={this.state.purchasedData.data2}\n                  isPurchased={this.state.purchasedData.data2}\n                  dataLink={dataLinks.filename2}\n                ></DataPack>\n                <DataPack\n                  value={5000}\n                  description=\"Advanced Engineering Report\"\n                  onClick={(e) => {\n                    this.handleClick(e);\n                  }}\n                  id=\"3\"\n                  disabled={this.state.purchasedData.data3}\n                  isPurchased={this.state.purchasedData.data3}\n                  dataLink={dataLinks.filename3}\n                ></DataPack>\n                <DataPack\n                  value={5000}\n                  description=\"Visitor DataPack\"\n                  onClick={(e) => {\n                    this.handleClick(e);\n                  }}\n                  id=\"4\"\n                  disabled={this.state.purchasedData.data4}\n                  isPurchased={this.state.purchasedData.data4}\n                  dataLink={dataLinks.filename4}\n                ></DataPack>\n                <DataPack\n                  value={5000}\n                  description=\"Ticket Sales DataPack\"\n                  onClick={(e) => {\n                    this.handleClick(e);\n                  }}\n                  id=\"5\"\n                  disabled={this.state.purchasedData.data5}\n                  isPurchased={this.state.purchasedData.data5}\n                  dataLink={dataLinks.filename5}\n                ></DataPack>\n                <DataPack\n                  value={5000}\n                  description=\"Competitor DataPack\"\n                  onClick={(e) => {\n                    this.handleClick(e);\n                  }}\n                  id=\"6\"\n                  disabled={this.state.purchasedData.data6}\n                  isPurchased={this.state.purchasedData.data6}\n                  dataLink={dataLinks.filename6}\n                ></DataPack>\n              </Box>\n            </Box>\n          </Container>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default BuyData;\n"]},"metadata":{},"sourceType":"module"}