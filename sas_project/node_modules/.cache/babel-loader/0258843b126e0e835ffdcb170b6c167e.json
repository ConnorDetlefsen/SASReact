{"ast":null,"code":"var _jsxFileName = \"/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyRides.jsx\";\nimport React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport UserContext from \"../Context/UserContext\";\nimport Ride from \"../Components/RideSelection\";\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { FastfoodOutlined } from \"@material-ui/icons\";\nimport WoodenCoasterImage from \"../Images/RideImages/wooden_coaster.jpg\";\nimport Inverted from \"../Images/RideImages/inverted_coaster.jpg\";\nimport Water from \"../Images/RideImages/water_coaster.jpg\";\nimport Drop from \"../Images/RideImages/drop_tower.jpg\";\nimport Accelerator from \"../Images/RideImages/accelerator_coaster.jpg\";\nimport Standup from \"../Images/RideImages/standing_coaster.jpg\";\nimport DriverCoaster from \"../Images/RideImages/driver_coaster.jpg\";\nimport FourD from \"../Images/RideImages/4D_animation.jpg\";\n\nclass BuyRides extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ride1Purchased: false,\n      ride2Purchased: false,\n      ride3Purchased: false,\n      ride4Purchased: false,\n      ride5Purchased: false,\n      ride6Purchased: false,\n      ride7Purchased: false,\n      ride8Purchased: false,\n      rideOptions: [],\n      ride1: [],\n      ride2: [],\n      ride3: [],\n      ride4: [],\n      ride5: [],\n      ride6: [],\n      ride7: [],\n      ride8: [],\n      ridePost: {\n        team_id: 1,\n        ride_length: 4,\n        seats: 4,\n        description: \"Wooden\",\n        kid_friendly: true,\n        ride_id: 1,\n        waterproof: false,\n        enclosure: false,\n        damaged: false\n      },\n      ridesPurchased: []\n    };\n\n    this.handleCheckBoxChange = e => {\n      let state = e.currentTarget.attributes.stateVar.value; //this is the state var being changed by checking box\n\n      this.setState(initialState => ({\n        [state]: !initialState[state]\n      }));\n    };\n\n    this.onNextClick = e => {\n      const {\n        history\n      } = this.props;\n      history.push(\"/buyride2\");\n    };\n\n    this.onRideMaintenance = e => {\n      const {\n        history\n      } = this.props;\n      history.push(\"/ridemaintenance\");\n    };\n\n    this.handleClick = e => {\n      const {\n        team,\n        ridePost\n      } = this.state;\n      const amount = e.currentTarget.value;\n      const budget = team.budget; // used to set api team.budget\n\n      const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n\n      if (isBudgetNotNegative < 0) {\n        toast.error(\"You don't have enough money!\");\n        return;\n      }\n\n      team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n      this.context.currentUser.budget = team.budget; //updates the context\n\n      this.setState({\n        test: true\n      });\n      http.put(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID, team); //end budget check\n      // let kidBool = e.currentTarget.attributes.stateVar.value;\n\n      let RideLengthTest = parseInt(e.currentTarget.attributes.time.value, 10);\n      let rideID = parseInt(e.currentTarget.id, 10);\n      http.post(config.apiEndpoint + \"/rides/\", {\n        team_id: this.context.currentUser.teamID,\n        ride_id: rideID,\n        ride_length: RideLengthTest,\n        seats: 4,\n        description: e.currentTarget.name,\n        status: 1.0\n      }).then(res => {\n        console.log(res);\n        toast.success(`Ride Bought Sent`);\n      });\n      let rideVar = \"ride\" + rideID;\n      this.state.ridesPurchased[rideVar] = true;\n      http.put(config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID, this.state.ridesPurchased); //update ridespurchased table here\n    };\n\n    this.onFinishPeriod = e => {\n      console.log(\"submit\");\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      history\n    } = this.props;\n\n    if (this.context.currentUser.name === null) {\n      history.push(\"/\");\n    }\n\n    http.get(config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        ridesPurchased: res.data\n      });\n    });\n    http.get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        team: res.data\n      });\n      this.context.currentUser.budget = res.data.budget; //updates the context\n    });\n    http.get(config.apiEndpoint + \"/rideoptions/\").then(res => {\n      this.setState({\n        rideOptions: res.data,\n        ride1: res.data[0],\n        ride2: res.data[1],\n        ride3: res.data[2],\n        ride4: res.data[3],\n        ride5: res.data[4],\n        ride6: res.data[5],\n        ride7: res.data[6],\n        ride8: res.data[7] // test: res.data.slice(0, 8),\n\n      });\n    }); //read in ride purchased table for team\n  }\n  /*\n   {this.state.test.map((test) => (\n                <tr key={test.id}>\n                  <Ride\n                    value={test.price}\n                    description={test.description}\n                    onClick={(e) => {\n                      this.handleClick(e);\n                    }}\n                    id={test.ride_id}\n                    time={test.ride_length}\n                  ></Ride>\n                  <br></br>\n                </tr>\n              ))}\n              */\n\n\n  render() {\n    const {\n      ride1,\n      ride2,\n      ride3,\n      ride4,\n      ride5,\n      ride6,\n      ride7,\n      ride8\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      id: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      activePage: \"rides\",\n      onFinishPeriod: this.onFinishPeriod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      id: \"page-content-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      pagename: \"map\",\n      budget: this.context.currentUser.budget,\n      period: this.context.currentUser.round,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      px: 5,\n      py: 4,\n      className: \"bg-white box-shadow rounded\",\n      minHeight: \"calc(100vh - 140px)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      p: 1,\n      textAlign: \"center\",\n      fontWeight: \"fontWeightBold\",\n      className: \"bg-blue box-shadow rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 19\n      }\n    }, \"Buy Rides\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"columns4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Ride, {\n      name: ride1.description,\n      image: WoodenCoasterImage,\n      value: ride1.price,\n      time: ride1.ride_length,\n      purchased: this.state.ridesPurchased.ride1,\n      onClick: this.handleClick,\n      id: ride1.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride2.description,\n      value: ride2.price,\n      image: Inverted,\n      time: ride2.ride_length,\n      purchased: this.state.ridesPurchased.ride2,\n      onClick: this.handleClick,\n      id: ride2.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride3.description,\n      value: ride3.price,\n      time: ride3.ride_length,\n      image: Water,\n      purchased: this.state.ridesPurchased.ride3,\n      onClick: this.handleClick,\n      id: ride3.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride4.description,\n      value: ride4.price,\n      image: Drop,\n      time: ride4.ride_length,\n      purchased: this.state.ridesPurchased.ride4,\n      onClick: this.handleClick,\n      id: ride4.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride5.description,\n      value: ride5.price,\n      image: Accelerator,\n      time: ride5.ride_length,\n      purchased: this.state.ridesPurchased.ride5,\n      onClick: this.handleClick,\n      id: ride5.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride6.description,\n      value: ride6.price,\n      image: Standup,\n      time: ride6.ride_length,\n      purchased: this.state.ridesPurchased.ride6,\n      onClick: this.handleClick,\n      id: ride6.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride7.description,\n      value: ride7.price,\n      image: DriverCoaster,\n      time: ride7.ride_length,\n      purchased: this.state.ridesPurchased.ride7,\n      onClick: this.handleClick,\n      id: ride7.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride8.description,\n      value: ride8.price,\n      image: FourD,\n      time: ride8.ride_length,\n      purchased: this.state.ridesPurchased.ride8,\n      onClick: this.handleClick,\n      id: ride8.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onRideMaintenance,\n      class: \"btn btn-primary leftButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 15\n      }\n    }, \"Ride Maintenance\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onNextClick,\n      class: \"btn btn-primary rightButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 15\n      }\n    }, \"Next Page\")))));\n  }\n\n}\n\nBuyRides.contextType = UserContext;\nexport default BuyRides;","map":{"version":3,"sources":["/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyRides.jsx"],"names":["React","Component","Sidebar","NavBar","UserContext","Ride","http","config","toast","ToastContainer","Box","Container","Grid","FastfoodOutlined","WoodenCoasterImage","Inverted","Water","Drop","Accelerator","Standup","DriverCoaster","FourD","BuyRides","state","ride1Purchased","ride2Purchased","ride3Purchased","ride4Purchased","ride5Purchased","ride6Purchased","ride7Purchased","ride8Purchased","rideOptions","ride1","ride2","ride3","ride4","ride5","ride6","ride7","ride8","ridePost","team_id","ride_length","seats","description","kid_friendly","ride_id","waterproof","enclosure","damaged","ridesPurchased","handleCheckBoxChange","e","currentTarget","attributes","stateVar","value","setState","initialState","onNextClick","history","props","push","onRideMaintenance","handleClick","team","amount","budget","isBudgetNotNegative","parseInt","error","context","currentUser","test","put","apiEndpoint","teamID","RideLengthTest","time","rideID","id","post","name","status","then","res","console","log","success","rideVar","onFinishPeriod","componentDidMount","get","data","render","round","price","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport UserContext from \"../Context/UserContext\";\n\nimport Ride from \"../Components/RideSelection\";\n\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { FastfoodOutlined } from \"@material-ui/icons\";\n\nimport WoodenCoasterImage from \"../Images/RideImages/wooden_coaster.jpg\";\nimport Inverted from \"../Images/RideImages/inverted_coaster.jpg\";\nimport Water from \"../Images/RideImages/water_coaster.jpg\";\nimport Drop from \"../Images/RideImages/drop_tower.jpg\";\nimport Accelerator from \"../Images/RideImages/accelerator_coaster.jpg\";\nimport Standup from \"../Images/RideImages/standing_coaster.jpg\";\nimport DriverCoaster from \"../Images/RideImages/driver_coaster.jpg\";\nimport FourD from \"../Images/RideImages/4D_animation.jpg\";\n\nclass BuyRides extends Component {\n  static contextType = UserContext;\n\n  state = {\n    ride1Purchased: false,\n    ride2Purchased: false,\n    ride3Purchased: false,\n    ride4Purchased: false,\n    ride5Purchased: false,\n    ride6Purchased: false,\n    ride7Purchased: false,\n    ride8Purchased: false,\n\n    rideOptions: [],\n\n    ride1: [],\n    ride2: [],\n    ride3: [],\n    ride4: [],\n    ride5: [],\n    ride6: [],\n    ride7: [],\n    ride8: [],\n\n    ridePost: {\n      team_id: 1,\n      ride_length: 4,\n      seats: 4,\n      description: \"Wooden\",\n      kid_friendly: true,\n      ride_id: 1,\n      waterproof: false,\n      enclosure: false,\n      damaged: false,\n    },\n    ridesPurchased: [],\n  };\n\n  async componentDidMount() {\n    const { history } = this.props;\n\n    if (this.context.currentUser.name === null) {\n      history.push(\"/\");\n    }\n\n    http\n      .get(\n        config.apiEndpoint +\n          \"/ridespurchased/\" +\n          this.context.currentUser.teamID\n      )\n      .then((res) => {\n        this.setState({ ridesPurchased: res.data });\n      });\n\n    http\n      .get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID)\n      .then((res) => {\n        this.setState({ team: res.data });\n        this.context.currentUser.budget = res.data.budget; //updates the context\n      });\n    http.get(config.apiEndpoint + \"/rideoptions/\").then((res) => {\n      this.setState({\n        rideOptions: res.data,\n        ride1: res.data[0],\n        ride2: res.data[1],\n        ride3: res.data[2],\n        ride4: res.data[3],\n        ride5: res.data[4],\n        ride6: res.data[5],\n        ride7: res.data[6],\n        ride8: res.data[7],\n\n        // test: res.data.slice(0, 8),\n      });\n    });\n    //read in ride purchased table for team\n  }\n\n  /*\n   {this.state.test.map((test) => (\n                <tr key={test.id}>\n                  <Ride\n                    value={test.price}\n                    description={test.description}\n                    onClick={(e) => {\n                      this.handleClick(e);\n                    }}\n                    id={test.ride_id}\n                    time={test.ride_length}\n                  ></Ride>\n                  <br></br>\n                </tr>\n              ))}\n              */\n\n  handleCheckBoxChange = (e) => {\n    let state = e.currentTarget.attributes.stateVar.value; //this is the state var being changed by checking box\n    this.setState((initialState) => ({\n      [state]: !initialState[state],\n    }));\n  };\n\n  onNextClick = (e) => {\n    const { history } = this.props;\n    history.push(\"/buyride2\");\n  };\n\n  onRideMaintenance = (e) => {\n    const { history } = this.props;\n    history.push(\"/ridemaintenance\");\n  };\n  handleClick = (e) => {\n    const { team, ridePost } = this.state;\n\n    const amount = e.currentTarget.value;\n    const budget = team.budget; // used to set api team.budget\n\n    const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n    if (isBudgetNotNegative < 0) {\n      toast.error(\"You don't have enough money!\");\n      return;\n    }\n    team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n    this.context.currentUser.budget = team.budget; //updates the context\n    this.setState({ test: true });\n    http.put(\n      config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID,\n      team\n    );\n    //end budget check\n\n    // let kidBool = e.currentTarget.attributes.stateVar.value;\n    let RideLengthTest = parseInt(e.currentTarget.attributes.time.value, 10);\n    let rideID = parseInt(e.currentTarget.id, 10);\n    http\n      .post(config.apiEndpoint + \"/rides/\", {\n        team_id: this.context.currentUser.teamID,\n        ride_id: rideID,\n        ride_length: RideLengthTest,\n        seats: 4,\n        description: e.currentTarget.name,\n        status: 1.0,\n      })\n      .then((res) => {\n        console.log(res);\n        toast.success(`Ride Bought Sent`);\n      });\n\n    let rideVar = \"ride\" + rideID;\n    this.state.ridesPurchased[rideVar] = true;\n\n    http.put(\n      config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID,\n      this.state.ridesPurchased\n    );\n\n    //update ridespurchased table here\n  };\n\n  onFinishPeriod = (e) => {\n    console.log(\"submit\");\n  };\n\n  render() {\n    const {\n      ride1,\n      ride2,\n      ride3,\n      ride4,\n      ride5,\n      ride6,\n      ride7,\n      ride8,\n    } = this.state;\n    return (\n      <React.Fragment>\n        <ToastContainer />\n        <Box display=\"flex\" id=\"wrapper\">\n          <Sidebar activePage=\"rides\" onFinishPeriod={this.onFinishPeriod} />\n          <Container id=\"page-content-wrapper\">\n            <NavBar\n              pagename=\"map\"\n              budget={this.context.currentUser.budget}\n              period={this.context.currentUser.round}\n            />\n            <Box\n              px={5}\n              py={4}\n              className=\"bg-white box-shadow rounded\"\n              minHeight={\"calc(100vh - 140px)\"}\n            >\n              <Grid container>\n                <Grid item xs={12}>\n                  <Box\n                    p={1}\n                    textAlign=\"center\"\n                    fontWeight=\"fontWeightBold\"\n                    className=\"bg-blue box-shadow rounded\"\n                  >\n                    Buy Rides\n                  </Box>\n                </Grid>\n              </Grid>\n              <br />\n\n              <div class=\"columns4\">\n                <Ride\n                  name={ride1.description}\n                  image={WoodenCoasterImage}\n                  value={ride1.price}\n                  time={ride1.ride_length}\n                  purchased={this.state.ridesPurchased.ride1}\n                  onClick={this.handleClick}\n                  id={ride1.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride2.description}\n                  value={ride2.price}\n                  image={Inverted}\n                  time={ride2.ride_length}\n                  purchased={this.state.ridesPurchased.ride2}\n                  onClick={this.handleClick}\n                  id={ride2.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride3.description}\n                  value={ride3.price}\n                  time={ride3.ride_length}\n                  image={Water}\n                  purchased={this.state.ridesPurchased.ride3}\n                  onClick={this.handleClick}\n                  id={ride3.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride4.description}\n                  value={ride4.price}\n                  image={Drop}\n                  time={ride4.ride_length}\n                  purchased={this.state.ridesPurchased.ride4}\n                  onClick={this.handleClick}\n                  id={ride4.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride5.description}\n                  value={ride5.price}\n                  image={Accelerator}\n                  time={ride5.ride_length}\n                  purchased={this.state.ridesPurchased.ride5}\n                  onClick={this.handleClick}\n                  id={ride5.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride6.description}\n                  value={ride6.price}\n                  image={Standup}\n                  time={ride6.ride_length}\n                  purchased={this.state.ridesPurchased.ride6}\n                  onClick={this.handleClick}\n                  id={ride6.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride7.description}\n                  value={ride7.price}\n                  image={DriverCoaster}\n                  time={ride7.ride_length}\n                  purchased={this.state.ridesPurchased.ride7}\n                  onClick={this.handleClick}\n                  id={ride7.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride8.description}\n                  value={ride8.price}\n                  image={FourD}\n                  time={ride8.ride_length}\n                  purchased={this.state.ridesPurchased.ride8}\n                  onClick={this.handleClick}\n                  id={ride8.ride_id}\n                ></Ride>\n              </div>\n              <br />\n              <button\n                onClick={this.onRideMaintenance}\n                class=\"btn btn-primary leftButton\"\n              >\n                Ride Maintenance\n              </button>\n              <button\n                onClick={this.onNextClick}\n                class=\"btn btn-primary rightButton\"\n              >\n                Next Page\n              </button>\n            </Box>\n          </Container>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default BuyRides;\n"]},"metadata":{},"sourceType":"module"}