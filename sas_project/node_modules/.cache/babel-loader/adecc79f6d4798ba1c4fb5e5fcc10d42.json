{"ast":null,"code":"var _jsxFileName = \"/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyRides3.jsx\";\nimport React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport UserContext from \"../Context/UserContext\";\nimport Ride from \"../Components/RideSelection\";\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { FastfoodOutlined } from \"@material-ui/icons\";\n\nclass BuyRides3 extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      ride17Purchased: false,\n      ride18Purchased: false,\n      ride19Purchased: false,\n      ride20Purchased: false,\n      ride21Purchased: false,\n      ride22Purchased: false,\n      ride23Purchased: false,\n      ride24Purchased: false,\n      rideOptions: [],\n      ride17: [],\n      ride18: [],\n      ride19: [],\n      ride20: [],\n      ride21: [],\n      ride22: [],\n      ride23: [],\n      ride24: [],\n      ridePost: {\n        row_id: 1,\n        team_id: null,\n        ride_id: null,\n        round_num: 1,\n        period_num: 1,\n        ride_length: null,\n        seats: null\n      },\n      ridesPurchased: []\n    };\n\n    this.onBackClick = e => {\n      const {\n        history\n      } = this.props;\n      history.push(\"/buyride\");\n    };\n\n    this.handleCheckBoxChange = e => {\n      let state = e.currentTarget.attributes.stateVar.value; //this is the state var being changed by checking box\n\n      this.setState(initialState => ({\n        [state]: !initialState[state]\n      }));\n    };\n\n    this.handleClick = e => {\n      const {\n        team,\n        ridePost\n      } = this.state;\n      const amount = e.currentTarget.value;\n      const budget = team.budget; // used to set api team.budget\n\n      const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n\n      if (isBudgetNotNegative < 0) {\n        toast.error(\"You don't have enough money!\");\n        return;\n      }\n\n      team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n      this.context.currentUser.budget = team.budget; //updates the context\n\n      this.setState({\n        test: true\n      });\n      http.put(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID, team); //end budget check\n\n      let RideLengthTest = parseInt(e.currentTarget.attributes.time.value, 10);\n      let rideID = parseInt(e.currentTarget.id, 10);\n      http.post(config.apiEndpoint + \"/rides/\", {\n        team_id: this.context.currentUser.teamID,\n        ride_id: rideID,\n        ride_length: RideLengthTest,\n        seats: 4,\n        description: e.currentTarget.name,\n        status: 1.0\n      }).then(res => {\n        console.log(res);\n        toast.success(`Ride Bought Sent`);\n      });\n      let rideVar = \"ride\" + rideID;\n      this.state.ridesPurchased[rideVar] = true;\n      http.put(config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID, this.state.ridesPurchased);\n    };\n\n    this.onFinishPeriod = e => {\n      console.log(\"submit\");\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      history\n    } = this.props;\n\n    if (this.context.currentUser.name === null) {\n      history.push(\"/\");\n    }\n\n    http.get(config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        ridesPurchased: res.data\n      });\n    });\n    http.get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID).then(res => {\n      this.setState({\n        team: res.data\n      });\n      this.context.currentUser.budget = res.data.budget; //updates the context\n    });\n    http.get(config.apiEndpoint + \"/rideoptions/\").then(res => {\n      this.setState({\n        rideOptions: res.data,\n        ride17: res.data[16],\n        ride18: res.data[17],\n        ride19: res.data[18],\n        ride20: res.data[19],\n        ride21: res.data[20],\n        ride22: res.data[21],\n        ride23: res.data[22],\n        ride24: res.data[23] // test: res.data.slice(0, 8),\n\n      });\n    });\n  }\n  /*\n   {this.state.test.map((test) => (\n                <tr key={test.id}>\n                  <Ride\n                    value={test.price}\n                    description={test.description}\n                    onClick={(e) => {\n                      this.handleClick(e);\n                    }}\n                    id={test.ride_id}\n                    time={test.ride_length}\n                  ></Ride>\n                  <br></br>\n                </tr>\n              ))}\n              */\n\n\n  render() {\n    const {\n      ride17,\n      ride18,\n      ride19,\n      ride20,\n      ride21,\n      ride22,\n      ride23,\n      ride24\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      id: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      activePage: \"rides\",\n      onFinishPeriod: this.onFinishPeriod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      id: \"page-content-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      pagename: \"map\",\n      budget: this.context.currentUser.budget,\n      period: this.context.currentUser.round,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      px: 5,\n      py: 4,\n      className: \"bg-white box-shadow rounded\",\n      minHeight: \"calc(100vh - 140px)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      p: 1,\n      textAlign: \"center\",\n      fontWeight: \"fontWeightBold\",\n      className: \"bg-blue box-shadow rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, \"Buy Rides\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"columns4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Ride, {\n      name: ride17.description,\n      value: ride17.price,\n      time: ride17.ride_length,\n      purchased: this.state.ridesPurchased.ride17,\n      onClick: this.handleClick,\n      id: ride17.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride18.description,\n      value: ride18.price,\n      time: ride18.ride_length,\n      purchased: this.state.ridesPurchased.ride18,\n      onClick: this.handleClick,\n      id: ride18.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride19.description,\n      value: ride19.price,\n      time: ride19.ride_length,\n      purchased: this.state.ridesPurchased.ride19,\n      onClick: this.handleClick,\n      id: ride19.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride20.description,\n      value: ride20.price,\n      time: ride20.ride_length,\n      purchased: this.state.ridesPurchased.ride20,\n      onClick: this.handleClick,\n      id: ride20.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride21.description,\n      value: ride21.price,\n      time: ride21.ride_length,\n      purchased: this.state.ridesPurchased.ride21,\n      onClick: this.handleClick,\n      id: ride21.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride22.description,\n      value: ride22.price,\n      time: ride22.ride_length,\n      purchased: this.state.ridesPurchased.ride22,\n      onClick: this.handleClick,\n      id: ride22.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride23.description,\n      value: ride23.price,\n      time: ride23.ride_length,\n      purchased: this.state.ridesPurchased.ride23,\n      onClick: this.handleClick,\n      id: ride23.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Ride, {\n      name: ride24.description,\n      value: ride24.price,\n      time: ride24.ride_length,\n      purchased: this.state.ridesPurchased.ride24,\n      onClick: this.handleClick,\n      id: ride24.ride_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onBackClick,\n      class: \"btn btn-primary leftButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 15\n      }\n    }, \"Back Page\")))));\n  }\n\n}\n\nBuyRides3.contextType = UserContext;\nexport default BuyRides3;","map":{"version":3,"sources":["/Users/arshiasharma/Downloads/SASReact/sas_project/src/Pages/BuyRides3.jsx"],"names":["React","Component","Sidebar","NavBar","UserContext","Ride","http","config","toast","ToastContainer","Box","Container","Grid","FastfoodOutlined","BuyRides3","state","ride17Purchased","ride18Purchased","ride19Purchased","ride20Purchased","ride21Purchased","ride22Purchased","ride23Purchased","ride24Purchased","rideOptions","ride17","ride18","ride19","ride20","ride21","ride22","ride23","ride24","ridePost","row_id","team_id","ride_id","round_num","period_num","ride_length","seats","ridesPurchased","onBackClick","e","history","props","push","handleCheckBoxChange","currentTarget","attributes","stateVar","value","setState","initialState","handleClick","team","amount","budget","isBudgetNotNegative","parseInt","error","context","currentUser","test","put","apiEndpoint","teamID","RideLengthTest","time","rideID","id","post","description","name","status","then","res","console","log","success","rideVar","onFinishPeriod","componentDidMount","get","data","render","round","price","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Sidebar from \"../Components/Sidebar\";\nimport NavBar from \"../Components/NavBar\";\nimport UserContext from \"../Context/UserContext\";\n\nimport Ride from \"../Components/RideSelection\";\n\nimport http from \"../APIServices/httpService\";\nimport config from \"../APIServices/config.json\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Box, Container, Grid } from \"@material-ui/core\";\nimport { FastfoodOutlined } from \"@material-ui/icons\";\n\nclass BuyRides3 extends Component {\n  static contextType = UserContext;\n\n  state = {\n    ride17Purchased: false,\n    ride18Purchased: false,\n    ride19Purchased: false,\n    ride20Purchased: false,\n    ride21Purchased: false,\n    ride22Purchased: false,\n    ride23Purchased: false,\n    ride24Purchased: false,\n\n    rideOptions: [],\n\n    ride17: [],\n    ride18: [],\n    ride19: [],\n    ride20: [],\n    ride21: [],\n    ride22: [],\n    ride23: [],\n    ride24: [],\n\n    ridePost: {\n      row_id: 1,\n      team_id: null,\n      ride_id: null,\n      round_num: 1,\n      period_num: 1,\n      ride_length: null,\n      seats: null,\n    },\n    ridesPurchased: [],\n  };\n\n  onBackClick = (e) => {\n    const { history } = this.props;\n    history.push(\"/buyride\");\n  };\n\n  async componentDidMount() {\n    const { history } = this.props;\n\n    if (this.context.currentUser.name === null) {\n      history.push(\"/\");\n    }\n\n    http\n      .get(\n        config.apiEndpoint +\n          \"/ridespurchased/\" +\n          this.context.currentUser.teamID\n      )\n      .then((res) => {\n        this.setState({ ridesPurchased: res.data });\n      });\n\n    http\n      .get(config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID)\n      .then((res) => {\n        this.setState({ team: res.data });\n        this.context.currentUser.budget = res.data.budget; //updates the context\n      });\n    http.get(config.apiEndpoint + \"/rideoptions/\").then((res) => {\n      this.setState({\n        rideOptions: res.data,\n        ride17: res.data[16],\n        ride18: res.data[17],\n        ride19: res.data[18],\n        ride20: res.data[19],\n        ride21: res.data[20],\n        ride22: res.data[21],\n        ride23: res.data[22],\n        ride24: res.data[23],\n\n        // test: res.data.slice(0, 8),\n      });\n    });\n  }\n\n  /*\n   {this.state.test.map((test) => (\n                <tr key={test.id}>\n                  <Ride\n                    value={test.price}\n                    description={test.description}\n                    onClick={(e) => {\n                      this.handleClick(e);\n                    }}\n                    id={test.ride_id}\n                    time={test.ride_length}\n                  ></Ride>\n                  <br></br>\n                </tr>\n              ))}\n              */\n\n  handleCheckBoxChange = (e) => {\n    let state = e.currentTarget.attributes.stateVar.value; //this is the state var being changed by checking box\n    this.setState((initialState) => ({\n      [state]: !initialState[state],\n    }));\n  };\n  handleClick = (e) => {\n    const { team, ridePost } = this.state;\n\n    const amount = e.currentTarget.value;\n    const budget = team.budget; // used to set api team.budget\n\n    const isBudgetNotNegative = parseInt(budget, 10) - parseInt(amount, 10);\n    if (isBudgetNotNegative < 0) {\n      toast.error(\"You don't have enough money!\");\n      return;\n    }\n    team.budget = parseInt(budget, 10) - parseInt(amount, 10);\n    this.context.currentUser.budget = team.budget; //updates the context\n    this.setState({ test: true });\n    http.put(\n      config.apiEndpoint + \"/team/\" + this.context.currentUser.teamID,\n      team\n    );\n    //end budget check\n\n    let RideLengthTest = parseInt(e.currentTarget.attributes.time.value, 10);\n    let rideID = parseInt(e.currentTarget.id, 10);\n    http\n      .post(config.apiEndpoint + \"/rides/\", {\n        team_id: this.context.currentUser.teamID,\n        ride_id: rideID,\n        ride_length: RideLengthTest,\n        seats: 4,\n        description: e.currentTarget.name,\n\n        status: 1.0,\n      })\n      .then((res) => {\n        console.log(res);\n        toast.success(`Ride Bought Sent`);\n      });\n\n    let rideVar = \"ride\" + rideID;\n    this.state.ridesPurchased[rideVar] = true;\n\n    http.put(\n      config.apiEndpoint + \"/ridespurchased/\" + this.context.currentUser.teamID,\n      this.state.ridesPurchased\n    );\n  };\n\n  onFinishPeriod = (e) => {\n    console.log(\"submit\");\n  };\n\n  render() {\n    const {\n      ride17,\n      ride18,\n      ride19,\n      ride20,\n      ride21,\n      ride22,\n      ride23,\n      ride24,\n    } = this.state;\n    return (\n      <React.Fragment>\n        <ToastContainer />\n        <Box display=\"flex\" id=\"wrapper\">\n          <Sidebar activePage=\"rides\" onFinishPeriod={this.onFinishPeriod} />\n          <Container id=\"page-content-wrapper\">\n            <NavBar\n              pagename=\"map\"\n              budget={this.context.currentUser.budget}\n              period={this.context.currentUser.round}\n            />\n            <Box\n              px={5}\n              py={4}\n              className=\"bg-white box-shadow rounded\"\n              minHeight={\"calc(100vh - 140px)\"}\n            >\n              <Grid container>\n                <Grid item xs={12}>\n                  <Box\n                    p={1}\n                    textAlign=\"center\"\n                    fontWeight=\"fontWeightBold\"\n                    className=\"bg-blue box-shadow rounded\"\n                  >\n                    Buy Rides\n                  </Box>\n                </Grid>\n              </Grid>\n              <br />\n\n              <div class=\"columns4\">\n                <Ride\n                  name={ride17.description}\n                  value={ride17.price}\n                  time={ride17.ride_length}\n                  purchased={this.state.ridesPurchased.ride17}\n                  onClick={this.handleClick}\n                  id={ride17.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride18.description}\n                  value={ride18.price}\n                  time={ride18.ride_length}\n                  purchased={this.state.ridesPurchased.ride18}\n                  onClick={this.handleClick}\n                  id={ride18.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride19.description}\n                  value={ride19.price}\n                  time={ride19.ride_length}\n                  purchased={this.state.ridesPurchased.ride19}\n                  onClick={this.handleClick}\n                  id={ride19.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride20.description}\n                  value={ride20.price}\n                  time={ride20.ride_length}\n                  purchased={this.state.ridesPurchased.ride20}\n                  onClick={this.handleClick}\n                  id={ride20.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride21.description}\n                  value={ride21.price}\n                  time={ride21.ride_length}\n                  purchased={this.state.ridesPurchased.ride21}\n                  onClick={this.handleClick}\n                  id={ride21.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride22.description}\n                  value={ride22.price}\n                  time={ride22.ride_length}\n                  purchased={this.state.ridesPurchased.ride22}\n                  onClick={this.handleClick}\n                  id={ride22.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride23.description}\n                  value={ride23.price}\n                  time={ride23.ride_length}\n                  purchased={this.state.ridesPurchased.ride23}\n                  onClick={this.handleClick}\n                  id={ride23.ride_id}\n                ></Ride>\n                <Ride\n                  name={ride24.description}\n                  value={ride24.price}\n                  time={ride24.ride_length}\n                  purchased={this.state.ridesPurchased.ride24}\n                  onClick={this.handleClick}\n                  id={ride24.ride_id}\n                ></Ride>\n              </div>\n              <br></br>\n\n              <button\n                onClick={this.onBackClick}\n                class=\"btn btn-primary leftButton\"\n              >\n                Back Page\n              </button>\n            </Box>\n          </Container>\n        </Box>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default BuyRides3;\n"]},"metadata":{},"sourceType":"module"}